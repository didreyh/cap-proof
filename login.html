<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tatak JPD ‚Äî Login</title>
  <style>
    :root{
      --bg:#f5f6f8;
      --card:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --border:#e5e7eb;
      --shadow: 0 18px 45px rgba(0,0,0,.12);
      --btn:#0b0b0b;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(1200px 700px at 50% -10%, #ffffff 0%, var(--bg) 60%);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .wrap{width:min(520px, 100%);}
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:26px;
      box-shadow:var(--shadow);
      padding:28px;
    }
    .logo{
      text-align:center;
      margin-bottom:16px;
    }
    .logo .icon{font-size:40px; display:block; margin-bottom:10px}
    .logo h1{margin:0; font-size:30px; font-weight:800}
    .logo p{margin:6px 0 0; color:var(--muted)}
    label{display:block; font-weight:700; margin:18px 0 8px}
    input{
      width:100%;
      padding:14px 16px;
      border:1px solid var(--border);
      border-radius:14px;
      outline:none;
      font-size:16px;
    }
    input:focus{border-color:#c7cbd1; box-shadow:0 0 0 4px rgba(0,0,0,.06)}
    .btn{
      width:100%;
      margin-top:18px;
      padding:14px 16px;
      background:linear-gradient(180deg, #111 0%, #000 100%);
      border:none;
      color:#fff;
      border-radius:16px;
      font-size:18px;
      font-weight:800;
      cursor:pointer;
    }
    .hint{
      margin-top:10px;
      text-align:center;
      color:var(--muted);
      font-size:13px;
    }
    .status{
      margin-top:14px;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid var(--border);
      background:#f9fafb;
      color:#111;
      display:none;
      font-size:14px;
      white-space:pre-wrap;
    }
    .status.ok{border-color:#bbf7d0; background:#ecfdf5;}
    .status.bad{border-color:#fecaca; background:#fef2f2;}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="logo">
        <span class="icon">üîê</span>
        <h1>Tatak JPD</h1>
        <p>Cap Packing &amp; AWB Proof System</p>
      </div>

      <form id="loginForm">
        <label>Email</label>
        <input id="email" type="email" placeholder="you@email.com" autocomplete="username" required />

        <label>Password</label>
        <input id="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" required />

        <button class="btn" type="submit" id="btnLogin">Login</button>
      </form>

      <div id="status" class="status"></div>
      <div class="hint">Private system ‚Äî login required</div>
    </div>
  </div>

  <script type="module">
    import { firebaseConfig } from "./firebase.js";
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
    import { getAuth, onAuthStateChanged, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const statusEl = document.getElementById("status");
    const form = document.getElementById("loginForm");
    const btn = document.getElementById("btnLogin");

    function setStatus(msg, type=""){
      statusEl.style.display = "block";
      statusEl.className = "status " + (type || "");
      statusEl.textContent = msg;
    }

    // If already logged in, go to app
    onAuthStateChanged(auth, (user) => {
      if (user) window.location.href = "./index.html";
    });

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      btn.disabled = true;
      btn.textContent = "Logging in...";
      statusEl.style.display = "none";

      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value;

      try{
        await signInWithEmailAndPassword(auth, email, password);
        setStatus("‚úÖ Logged in! Redirecting...", "ok");
        window.location.href = "./index.html";
      }catch(err){
        setStatus("‚ùå Login failed:\n" + (err?.message || err), "bad");
        btn.disabled = false;
        btn.textContent = "Login";
      }
    });
  </script>
</body>
</html>